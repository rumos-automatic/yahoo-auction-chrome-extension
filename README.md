# ヤフオク自動出品ツール - Chrome拡張機能版

ヤフオクへの商品自動出品を支援するChrome拡張機能です。CSVファイルから商品情報を読み込み、画像アップロードから出品まで自動化します。

## 🚀 特徴

- **ログイン不要**: ブラウザで既にログイン済みのセッションを利用
- **CSVファイル対応**: 商品情報を一括管理
- **画像一括アップロード**: フォルダから複数の画像を選択
- **自動再出品設定**: 落札されなかった場合の自動再出品
- **ChatWork連携**: エラー通知をChatWorkに送信
- **進捗表示**: リアルタイムで出品状況を確認
- **リトライ機能**: エラー時の自動リトライ

## 📋 必要要件

- Google Chrome または Microsoft Edge
- ヤフオクアカウント（既にログイン済み）
- 出品データCSVファイル
- 商品画像フォルダ

## 📂 ファイル構成

```
yahoo-auction-chrome-extension/
├── manifest.json              # 拡張機能の設定
├── popup/
│   ├── popup.html            # ポップアップUI
│   ├── popup.js              # UI制御ロジック
│   └── popup.css             # スタイル
├── content/
│   └── content.js            # ページ操作スクリプト
├── background/
│   └── background.js         # バックグラウンド処理
├── lib/
│   ├── csvParser.js          # CSV解析
│   └── utils.js              # ユーティリティ
└── icons/
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

## 🔧 インストール方法

### 1. 拡張機能の読み込み

1. Chromeを開き、`chrome://extensions/` にアクセス
2. 右上の「デベロッパーモード」をONにする
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. `yahoo-auction-chrome-extension` フォルダを選択

### 2. アイコンの準備（オプション）

`icons` フォルダに以下のサイズのアイコンを配置してください：
- icon16.png (16x16px)
- icon48.png (48x48px)
- icon128.png (128x128px)

※ アイコンがない場合は、manifest.jsonから `icons` セクションを削除してください。

## 📝 CSVファイルの形式

CSVファイルは以下のカラムを含む必要があります：

| カラム名 | 必須 | 説明 | 例 |
|---------|------|------|-----|
| 画像1 | ○ | 1枚目の画像ファイル名 | iphone_01.jpg |
| カテゴリ | ○ | カテゴリID | 2084061388 |
| タイトル | ○ | 商品タイトル | iPhone 14 Pro 128GB |
| 説明 | ○ | 商品説明 | 美品です。付属品完備。 |
| 開始価格 | ○ | 開始価格（円） | 50000 |
| 即決価格 | ○ | 即決価格（円） | 80000 |
| 開催期間 | ○ | 終了日（YYYY/M/D形式） | 2024/12/31 |
| 終了時間 | ○ | 終了時間（数字のみ、0-23） | 22 |
| おすすめコレクション | - | 数字（通常は1） | 1 |
| 自動再出品 | - | 再出品回数（1-3） | 2 |
| 画像2 | - | 2枚目の画像ファイル名 | iphone_02.jpg |
| 画像3 | - | 3枚目の画像ファイル名 | iphone_03.jpg |
| 画像4 | - | 4枚目の画像ファイル名 | iphone_04.jpg |
| 画像5 | - | 5枚目の画像ファイル名 | iphone_05.jpg |

### CSVサンプル

```csv
画像1,カテゴリ,タイトル,説明,開始価格,即決価格,開催期間,終了時間,おすすめコレクション,自動再出品,画像2,画像3,画像4,画像5
iphone_01.jpg,2084061388,iPhone 14 Pro 128GB,美品です。付属品完備。,50000,80000,2024/12/31,22,1,2,iphone_02.jpg,iphone_03.jpg,iphone_04.jpg,iphone_05.jpg
```

## 🎯 使用方法

### 1. ヤフオクにログイン

Chromeでヤフオクにログインしておきます。

### 2. 拡張機能を開く

ブラウザツールバーの拡張機能アイコンをクリック。

### 3. ファイルを選択

1. **出品CSVファイル**: 商品データのCSVファイルを選択
2. **画像フォルダ**: 商品画像が入ったフォルダを選択

### 4. 設定

- **再試行回数**: エラー時のリトライ回数（1-10回）
- **ChatWork通知**: エラー時にChatWorkに通知する場合はONにする
  - API Key: ChatWorkのAPIキー
  - Room ID: 通知先のルームID

### 5. 出品開始

「🚀 自動出品開始」ボタンをクリックすると、自動出品が始まります。

### 6. 進捗確認

- プログレスバーで進捗を確認
- ログセクションで詳細な実行状況を確認
- 出品中は停止ボタンで中断可能

## ⚙️ 設定の永続化

設定は自動的にChromeのストレージに保存されます。次回起動時には前回の設定が読み込まれます。

## 🔍 トラブルシューティング

### 拡張機能が読み込めない

- manifest.jsonの構文エラーがないか確認
- すべての必須ファイルが揃っているか確認
- アイコンファイルがない場合は、manifest.jsonから `icons` と `action.default_icon` を削除

### 出品ページが開かない

- ヤフオクにログインしているか確認
- URLが `https://auctions.yahoo.co.jp/` であることを確認

### 画像がアップロードされない

- 画像ファイル名がCSVと一致しているか確認
- 画像形式が対応しているか確認（JPG, PNG, GIF）
- ファイルサイズが大きすぎないか確認（1ファイル5MB以下推奨）

### エラーが頻発する

- 再試行回数を増やす
- ヤフオクのページ構造が変更されていないか確認
- ブラウザのコンソールでエラーログを確認（F12 → Console）

## 📊 開発者向け情報

### デバッグ方法

1. `chrome://extensions/` で「デベロッパーモード」をON
2. 拡張機能の「詳細」をクリック
3. 「バックグラウンドページを検証」でデバッガーを開く
4. Content Scriptのデバッグは、対象ページでF12を開く

### ログの確認

- Popup: 右クリック → 「検証」
- Background: 拡張機能管理画面から「バックグラウンドページを検証」
- Content Script: ヤフオクページでF12 → Console

## 🛡️ セキュリティ

- APIキーやパスワードはローカルストレージに保存されます
- 通信はすべてHTTPSで行われます
- 第三者サーバーにデータは送信されません（ChatWork除く）

## ⚠️ 注意事項

- **利用規約の遵守**: ヤフオクの利用規約を必ず確認してください
- **自己責任**: 本ツールの利用は自己責任でお願いします
- **適度な利用**: 連続出品は控え、適度な間隔を空けてください
- **アカウント停止リスク**: 自動化ツールの利用によりアカウントが停止される可能性があります

## 📜 ライセンス

このプロジェクトは個人利用を目的としています。商用利用や再配布は禁止します。

## 🤝 サポート

問題が発生した場合は、ブラウザのコンソールログを確認してください。

## 🔄 更新履歴

### v2.0.0 (2025-10-01)
- **🚀 大規模アーキテクチャ変更**: File System Access API + IndexedDB 方式に移行
- **メモリ使用量 99%削減**: 2.5GB → 10MB（1000商品の場合）
- **起動時間 95%削減**: 数分 → 数秒
- **数千件の大量出品に対応**: メモリ効率を大幅改善
- Data URL 方式を廃止し、必要な画像だけを都度読み込む方式に変更

### v1.0.0 (2024-XX-XX)
- 初回リリース
- Python版からChrome拡張機能版への移植
- 基本的な出品機能の実装
- ChatWork連携機能
- リトライ機能
- 進捗表示機能

詳細は [CHANGELOG.md](CHANGELOG.md) を参照してください。

## 🎓 元のPython版との違い

| 機能 | Python版 | Chrome拡張版 |
|------|---------|-------------|
| ログイン | 自動ログイン | ブラウザのセッション利用 |
| ドライバー | Selenium + ChromeDriver | Content Script |
| アカウント管理 | accounts.csv | 不要 |
| インストール | Python + ライブラリ | Chrome拡張のみ |
| 設定ファイル | autoListing.conf | ストレージAPI |

---

**注意**: このツールを使用する前に、必ずヤフオクの利用規約を確認し、自動化ツールの利用が許可されているか確認してください。
